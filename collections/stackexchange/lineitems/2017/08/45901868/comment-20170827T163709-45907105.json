{"id": 45907105, "name": "ehennum", "url": "https://stackoverflow.com/users/1091497/ehennum", "text": "Is it possible to store each group in a separate document?  That way, you can match and sort groups independently and calculate a grand total for any combination of groups.\r\n\r\nAs a rule of thumb for those familiar with relational databases, the optimal granularity is to model each row as a separate document.\r\n\r\nOn MarkLogic 9, you can write a TDE that projects each group as a separate row and then sort rows regardless of document persistence.\r\n\r\nIf you update groups independently, however, it is still better to write a separate document for each group.\r\n\r\nIf you are working in MarkLogic 8 and must store multiple groups in a single document, it is possible to use server-side JavaScript or XQuery on the enode to sort the nodes.  While that approach works functionally, it doesn't get the full benefit of the MarkLogic capabilities.\r\n\r\nAll of the above assumes that you have to materialize these count documents.  The other question is whether you can put the things counted in documents, put A, B, and C collections on those countable documents, and calculate the count dynamically for any combination of counable documents.\r\n\r\nHoping that helps,\r\n", "date": "2017-08-27 16:37:09", "photo": "https://www.gravatar.com/avatar/293bdd8ee3ce350e5de5e2e7a705db59?s=128&d=identicon&r=PG", "source_url": "https://stackoverflow.com/questions/45901868/marklogic-node-js-sorting-by-the-value-of-a-json-element-with-multiple-instance", "mention_url": "https://stackoverflow.com/questions/45901868/marklogic-node-js-sorting-by-the-value-of-a-json-element-with-multiple-instance", "source": "stackexchange"}