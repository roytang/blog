{"id": 47537558, "name": "mg_kedzie", "url": "https://stackoverflow.com/users/2056100/mg-kedzie", "text": "I converted JSON to XML, wrote XSLT transformation to get XML triples. Later XML can be transformed back to JSON if needed.\r\n\r\nXSLT transformation:\r\n  \r\n\r\n    <xsl:stylesheet version=\"2.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns:json=\"http://marklogic.com/xdmp/json/basic\" xmlns:sem=\"http://marklogic.com/semantics\" exclude-result-prefixes=\"json\">\r\n    <xsl:output method=\"xml\" version=\"1.0\" encoding=\"UTF-8\" indent=\"yes\"/>\r\n    <xsl:template match=\"json:content\">\r\n     <sem:triples xmlns:sem=\"http://marklogic.com/semantics\">\r\n      <xsl:apply-templates select=\"json:children\"/>\r\n     </sem:triples>\r\n    </xsl:template>\r\n    <xsl:template match=\"json:children\">\r\n     <xsl:for-each select=\"json:json\">\r\n      <xsl:variable name=\"subjectName\">\r\n       <xsl:value-of select=\"json:name/text()\"/>\r\n      </xsl:variable>\r\n     <xsl:for-each select=\"following-sibling::* | preceding-sibling::* \">\r\n      <sem:triple>\r\n       <sem:subject>\r\n        <xsl:value-of select=\"$subjectName\"/>\r\n       </sem:subject>\r\n       <sem:predicate>sibling-of</sem:predicate>\r\n       <sem:object><xsl:value-of select=\"json:name/text()\"/></sem:object>\r\n      </sem:triple>\r\n    </xsl:for-each>\r\n    </xsl:for-each>\r\n    </xsl:template>\r\n    </xsl:stylesheet>\r\n\r\n\r\n\r\nXQuery code that converts JSON to XML and makes transformation:\r\n\r\n    xquery version \"1.0-ml\";\r\n    import module namespace json = \"http://marklogic.com/xdmp/json\" at \"/MarkLogic/json/json.xqy\";\r\n    declare namespace sem = \"http://marklogic.com/semantics\";\r\n    declare variable $j := '{\"content\": {\"name\": \"Joe Parent\",\"children\": [{\"name\": \"Bob Child\"}, {\"name\": \"Sue Child\"}, {\"name\": \"Guy Child\"}]}}';\r\n    let $doc := json:transform-from-json($j),\r\n    $xslt := doc(\"myTemplates.xsl\"),\r\n    $result :=  xdmp:xslt-eval($xslt,$doc),\r\n    $config := json:config(\"custom\"),\r\n    $_ := map:put($config, \"whitespace\", \"ignore\"),\r\n    $_ := map:put($config, \"array-element-names\", (\"triple\")),\r\n    $_ := map:put($config, \"element-namespace\",\"http://marklogic.com/semantics\")\r\n    return json:transform-to-json($result, $config)\r\n\r\n\r\n", "date": "2017-11-28 17:27:58", "photo": "https://i.stack.imgur.com/OnYBG.jpg?s=128&g=1", "source_url": "https://stackoverflow.com/questions/47513579/marklogic-template-driven-extraction-and-triples-forming-triples-between-array", "mention_url": "https://stackoverflow.com/questions/47513579/marklogic-template-driven-extraction-and-triples-forming-triples-between-array", "source": "stackexchange"}