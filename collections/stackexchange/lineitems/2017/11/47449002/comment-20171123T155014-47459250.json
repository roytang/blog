{"id": 47459250, "name": "Mads Hansen", "url": "https://stackoverflow.com/users/14419/mads-hansen", "text": "Change the context for your template to match on each of the children, and then project the triples from each child, rather than from the parent. \r\n\r\nWith the context as `children`, the object val is `xs:string(name)` and then in order to select it's parent, adjust the selection of the subject val relative from the child to be `xs:string(../../name)`.\r\n\r\n    var template = xdmp.toJSON(\r\n    {\r\n      \"template\":{\r\n        \"context\":\"children\",\r\n        \"collections\": [\r\n          \"test\"\r\n        ],\r\n          \"triples\":[\r\n          {\r\n            \"subject\": {\r\n              \"val\": \"xs:string(../../name)\"\r\n            },\r\n            \"predicate\": {\r\n              \"val\": \"sem:iri('is-parent-of')\"\r\n            },\r\n            \"object\": {\r\n              \"val\": \"xs:string(name)\"\r\n            }     \r\n          }\r\n        ]   \r\n      }\r\n    }\r\n    );", "date": "2017-11-23 15:50:14", "photo": "https://i.stack.imgur.com/Rw8Ws.png?s=128&g=1", "source_url": "https://stackoverflow.com/questions/47449002/marklogic-template-driven-extraction-and-triples-dealing-with-array-nodes", "mention_url": "https://stackoverflow.com/questions/47449002/marklogic-template-driven-extraction-and-triples-dealing-with-array-nodes", "source": "stackexchange"}